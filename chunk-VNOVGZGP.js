import{a as oe,b as ae,c as re,d as ce}from"./chunk-7SOFHDHM.js";import{$ as G,B as l,H as D,I as C,J as q,K as E,L as x,M as v,N as J,O as f,P as p,Q as F,R as a,S as c,T as w,U as O,W as b,X as s,Y as H,Z as o,_ as u,ba as Q,ca as U,da as X,fa as h,ga as P,ha as Y,j as z,ja as k,ka as Z,l as y,la as ee,ma as N,n as g,o as _,oa as te,pa as ne,qa as ie,v as K,y as W,z as d}from"./chunk-CA7PWZ5A.js";var V=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=l({type:n,selectors:[["app-assignment-root"]],decls:13,vars:0,consts:[[1,"app-cmp-nav"],["routerLinkActive","app-st-active"],["routerLink","./view"],[1,"material-symbols-outlined"],["routerLink","./form"]],template:function(e,i){e&1&&(f(0,"nav")(1,"ul",0)(2,"li",1)(3,"a",2)(4,"i",3),o(5,"view_list"),p(),o(6," View "),p()(),f(7,"li",1)(8,"a",4)(9,"i",3),o(10,"edit_document"),p(),o(11," Form "),p()()()(),F(12,"router-outlet"))},dependencies:[ne,ie,te],styles:["@layer{[_nghost-%COMP%]{box-sizing:border-box;display:block;margin:0;padding:0;border:none}}"],changeDetection:0})};function j(){return 0}function B(){return[j()]}function me(){return[B()]}function de(n,t){if(n&1){let e=w();a(0,"div",14)(1,"label"),o(2),c(),a(3,"div",18)(4,"input",19),b("input",function(r){let m=g(e).$implicit,A=s(2);return _(A.updateValue(m,r))}),c(),a(5,"button",20),b("click",function(){let r=g(e).$index,m=s().$implicit,A=s();return _(A.onRemoveNumber(m,r))}),a(6,"span",3),o(7,"remove"),c()()()()}if(n&2){let e=t.$implicit,i=t.$index,r=t.$count;d(2),G("No. ",i+1),d(2),O("value",e().value()),d(),O("disabled",r===1)}}function se(n,t){if(n&1){let e=w();a(0,"div",5)(1,"header",6)(2,"div",7)(3,"span",8),o(4,"Section"),c(),a(5,"span",9),o(6),c()(),a(7,"div",10)(8,"button",11),b("click",function(){let r=g(e).$implicit,m=s();return _(m.onAddNumber(r))}),a(9,"span",3),o(10,"add"),c()(),a(11,"button",12),b("click",function(){let r=g(e).$index,m=s();return _(m.onRemoveSection(r))}),a(12,"span",3),o(13,"close"),c()()()(),a(14,"div",13),x(15,de,8,3,"div",14,E),c(),a(17,"footer",15)(18,"span",16),o(19,"Section Summary"),c(),a(20,"span",17),o(21),h(22,"number"),c()()()}if(n&2){let e=t.$implicit,i=t.$index,r=t.$count,m=s();d(6),u(i+1),d(5),O("disabled",r===1),d(4),v(e),d(6),u(P(22,3,e().metadata(m.totalKey)()))}}var I=class n{data=ee.required();totalKey=ae();form=re(this.data,t=>{ce(t,e=>{oe(e,this.totalKey,({valueOf:i})=>i(e).reduce((r,m)=>r+(Number(m)||0),0))})});onAddNewSection=()=>this.form().value.update(t=>[...t,B()]);onRemoveSection=t=>this.form().value.update(e=>e.filter((i,r)=>r!==t));onAddNumber=t=>t().value.update(e=>[...e,j()]);onRemoveNumber=(t,e)=>t().value.update(i=>i.filter((r,m)=>m!==e));updateValue=(t,e)=>{let i=e.target.value;t().value.set(Number(i)||0)};static \u0275fac=function(e){return new(e||n)};static \u0275cmp=l({type:n,selectors:[["app-dynamic-section-form"]],inputs:{data:[1,"data"]},outputs:{data:"dataChange"},decls:9,vars:2,consts:[[1,"assignment-wrapper"],[1,"actions-bar"],[1,"app-cmp-button","app-cl-filled",3,"click"],[1,"material-symbols-outlined"],[1,"sections-list"],[1,"section-box"],[1,"section-header"],[1,"title-info"],[1,"label"],[1,"number-badge"],[1,"header-buttons"],[1,"app-cmp-button",3,"click"],[1,"app-cmp-button","app-cl-warn",3,"click","disabled"],[1,"inputs-grid"],[1,"input-item"],[1,"section-footer"],[1,"result-text"],[1,"result-value"],[1,"field-group"],["type","number",3,"input","value"],[3,"click","disabled"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"button",2),b("click",function(){return i.onAddNewSection()}),a(3,"span",3),o(4,"add"),c(),o(5," New Section "),c()(),a(6,"div",4),x(7,se,23,5,"div",5,E),c()()),e&2&&(H("form-locked",i.form().disabled()),d(7),v(i.form))},dependencies:[N],styles:[".assignment-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.assignment-wrapper[_ngcontent-%COMP%]   .actions-bar[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.section-box[_ngcontent-%COMP%]{background:var(--app-surface-color);border:2px solid var(--app-surface-container-color);border-radius:12px;padding:16px;margin-bottom:20px;transition:transform .2s ease}.section-box[_ngcontent-%COMP%]:hover{border-color:var(--app-primary-color)}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--app-surface-container-color);padding-bottom:10px;margin-bottom:15px}.section-header[_ngcontent-%COMP%]   .number-badge[_ngcontent-%COMP%]{background:var(--app-primary-color);color:#fff;padding:2px 8px;border-radius:50%;margin-left:8px}.inputs-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px}.section-footer[_ngcontent-%COMP%]{margin-top:15px;padding-top:10px;display:flex;justify-content:space-between;font-weight:700;color:var(--app-primary-color)}"],changeDetection:0})};var le="dynamic-section-data",S=class n{keyName=`${y(W)}-${le}`;async get(){let t=sessionStorage.getItem(this.keyName);return t?JSON.parse(t):null}async set(t){sessionStorage.setItem(this.keyName,JSON.stringify(t))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};function pe(n,t){if(n&1){let e=w();f(0,"app-dynamic-section-form",1),X("dataChange",function(r){g(e);let m=s();return U(m.dataResource.value,r)||(m.dataResource.value=r),_(r)}),p()}if(n&2){let e=s();Q("data",e.dataResource.value)}}var R=class n{dataStorage=y(S);dataResource=k({loader:async()=>await this.dataStorage.get()??me()});constructor(){K(async()=>{this.dataResource.hasValue()&&await this.dataStorage.set(this.dataResource.value())})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=l({type:n,selectors:[["app-dynamic-section-form-page"]],decls:1,vars:1,consts:[[3,"data"],[3,"dataChange","data"]],template:function(e,i){e&1&&D(0,pe,1,1,"app-dynamic-section-form",0),e&2&&C(i.dataResource.hasValue()?0:-1)},dependencies:[I],styles:["@layer{[_nghost-%COMP%]{box-sizing:border-box;display:block;margin:0;padding:0;border:none}}"],changeDetection:0})};function ue(n,t){if(n&1&&(a(0,"dt"),o(1," number "),a(2,"span",6),o(3),c()(),a(4,"dd",7),o(5),h(6,"number"),c()),n&2){let e=t.$implicit,i=t.$index;d(3),u(i+1),d(2),u(P(6,2,e))}}function ge(n,t){if(n&1&&(a(0,"section",2)(1,"h3"),o(2," Section "),a(3,"span",3),o(4),c()(),a(5,"dl",4),x(6,ue,7,4,null,null,q),a(8,"dt"),o(9,"Result"),c(),a(10,"dd",5),o(11),h(12,"number"),c()()()),n&2){let e=t.$implicit,i=t.$index,r=s();d(4),u(i+1),d(2),v(e),d(5),u(P(12,2,r.totals()[i]))}}var $=class n{data=Z.required();totals=Y(()=>this.data().reduce((t,e)=>[...t,e.reduce((i,r)=>i+r,0)],[]));static \u0275fac=function(e){return new(e||n)};static \u0275cmp=l({type:n,selectors:[["app-dynamic-section-view"]],inputs:{data:[1,"data"]},decls:5,vars:0,consts:[[1,"_items-container"],[1,"_items-title"],[1,"_item-container"],[1,"_item-title-no","app-cl-number"],[1,"_values-container"],[1,"_values-total","app-cl-number"],[1,"_value-title-no","app-cl-number"],[1,"app-cl-number"]],template:function(e,i){e&1&&(a(0,"article",0)(1,"h2",1),o(2,"Sections"),c(),x(3,ge,13,4,"section",2,E),c()),e&2&&(d(3),v(i.data()))},dependencies:[N],styles:["@layer{[_nghost-%COMP%]{box-sizing:border-box;display:block;margin:0;padding:0;border:none}}._items-title[_ngcontent-%COMP%]{text-align:center}._item-container[_ngcontent-%COMP%]   ._item-title-no[_ngcontent-%COMP%]{display:inline-block;width:3ch;padding-left:1ch;margin-right:auto}@layer{._values-container[_ngcontent-%COMP%]{--_column-gap: var(--app-column-gap);--_row-gap: var(--app-row-gap)}}._values-container[_ngcontent-%COMP%]:is(dl){display:grid;align-items:baseline;grid-template-columns:auto 1fr;column-gap:var(--_column-gap);row-gap:var(--_row-gap)}._values-container[_ngcontent-%COMP%]:is(dl) > dt[_ngcontent-%COMP%]{font-weight:700}._values-container[_ngcontent-%COMP%]:is(dl) > dd[_ngcontent-%COMP%]{margin-left:0}@layer{._values-container[_ngcontent-%COMP%]:is(dl) > dd[_ngcontent-%COMP%]{text-align:justify}}._values-container[_ngcontent-%COMP%]{padding-left:64px}._values-container[_ngcontent-%COMP%]   ._value-title-no[_ngcontent-%COMP%]{display:inline-block;width:3ch;padding-left:1ch;margin-right:auto}._values-container[_ngcontent-%COMP%]   ._values-total[_ngcontent-%COMP%]{font-weight:700;text-decoration:underline double}"],changeDetection:0})};function _e(n,t){n&1&&F(0,"app-dynamic-section-view",0),n&2&&J("data",t)}function fe(n,t){n&1&&(f(0,"p",1)(1,"i",2),o(2,"warning"),p(),o(3," Not Found!!! "),p())}function ye(n,t){if(n&1&&D(0,_e,1,1,"app-dynamic-section-view",0)(1,fe,4,0,"p",1),n&2){let e,i=s();C((e=i.dataResource.value())?0:1,e)}}var L=class n{dataStorage=y(S);dataResource=k({loader:async()=>await this.dataStorage.get()});static \u0275fac=function(e){return new(e||n)};static \u0275cmp=l({type:n,selectors:[["app-dynamic-section-view-page"]],decls:1,vars:1,consts:[[3,"data"],[1,"_message"],[1,"material-symbols-outlined"]],template:function(e,i){e&1&&D(0,ye,2,1),e&2&&C(i.dataResource.hasValue()?0:-1)},dependencies:[$],styles:["@layer{[_nghost-%COMP%]{box-sizing:border-box;display:block;margin:0;padding:0;border:none}}@layer{._message[_ngcontent-%COMP%]{box-sizing:border-box;display:block;margin:0;padding:0;border:none}}._message[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;column-gap:var(--app-column-gap);font-size:xx-large;font-weight:600;margin-top:64px}._message[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{font-size:xx-large}"],changeDetection:0})};var Ze=[{path:"",component:V,children:[{path:"",redirectTo:"view",pathMatch:"full"},{path:"view",component:L},{path:"form",component:R}]}];export{Ze as default};
